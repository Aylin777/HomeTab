<!DOCTYPE html>
<html lang="en">
<head>
    {{ template "partials/head" }}
    {{ template "partials/thumb_style" }}
    <style>
        /* https://stackoverflow.com/a/6794097/1351857 */
        .center-img {
            /*width: 700px;*/
            margin-left: auto;
            margin-right: auto;
        }

        .center-test {
            background-color: #ddd;
            position: fixed;
            padding: 2em;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
        }

        .delete-button {
            background: unset;
            border: unset;
            margin: unset;
            padding: unset;
        }
    </style>
</head>
<body>
{{ template "partials/header" }}
<br/>
<div class="container">
    <div class="row">
        <div class="col-sm-12 col-lg-4">
            <h2>New</h2>
            <fieldset>
                <legend>Add new tag</legend>
                <form action="/file/{{ .File.Sha256 }}/tag/add" method="post">
                    <input type="text" name="name" autofocus> <input type="submit" value="Add">
                </form>
            </fieldset>

            {{ if .Tags }}
            <h2>Tags assigned</h2>
            <table>
                <thead>
                <tr>
                    <th>#</th>
                    <th>Delete</th>
                    <th>Name</th>
                </tr>
                </thead>
                <tbody>
                {{ range .Tags }}
                <tr>
                    <td data-label="#">
                        <a href="/files/tag/name/{{ .Name }}/page/1" target="_blank">
                            {{ .Id }}
                        </a>
                    </td>
                    <td data-label="Delete">
                        <form class="delete-button" action="/file/{{ $.File.Sha256 }}/tag/delete" method="post">
                            <input type="hidden" name="id" value="{{ .Id }}">
                            <input type="submit" value="X">
                        </form>
                    </td>
                    <td data-label="Name">
                        <a href="/files/tag/name/{{ .Name }}/page/1" target="_blank">
                            {{ .Name }} ({{ .Overall }})
                        </a>
                    </td>
                </tr>
                {{ end }}
                </tbody>
            </table>
            {{ else }}
            <h2>No tags assigned</h2>
            {{ end }}
        </div>

        <div class="col-sm-12 col-lg-6 col-sm-first col-lg-normal">
            <!-- Add the extra style to make card spacing look better -->
            <div class="center-img">
                <div style="min-width:700px">
                    <a href="/img/full/{{ .File.Sha256 }}" target="_blank">
                        <img src="/img/thumb/700/700/{{ .File.Sha256 }}" class="section media" alt="{{ .File.Name }}"/>
                    </a>
                </div>
                <!--<h3 class="section double-padded">Lorem ipsum</h3>-->
                <!--<p class="section double-padded">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>-->
            </div>
        </div>

        <div class="col-sm-12 col-lg-2">
            {{ range .Similar }}
            <span>{{ .Distance }}</span>
            <a href="/file/{{ .Sha256 }}" target="_blank">
                <img src="/img/thumb/100/100/{{ .Sha256 }}" alt="{{ .B }}"/>
            </a>
            <br>
            {{ end }}
        </div>

    </div>
</div>
{{ template "partials/footer" }}
</body>
</html>